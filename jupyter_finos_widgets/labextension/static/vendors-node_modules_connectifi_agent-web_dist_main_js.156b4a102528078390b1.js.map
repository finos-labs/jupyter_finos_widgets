{"version":3,"file":"vendors-node_modules_connectifi_agent-web_dist_main_js.156b4a102528078390b1.js","mappings":"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","sources":["webpack://jupyter_finos_widgets/./node_modules/@connectifi/agent-web/dist/main.js"],"sourcesContent":["var n,t,i,e,o,r,s;!function(n){n.AppNotFound=\"AppNotFound\",n.ErrorOnLaunch=\"ErrorOnLaunch\",n.AppTimeout=\"AppTimeout\",n.ResolverUnavailable=\"ResolverUnavailable\"}(n||(n={})),function(n){n.NoAppsFound=\"NoAppsFound\",n.ResolverUnavailable=\"ResolverUnavailable\",n.ResolverTimeout=\"ResolverTimeout\"}(t||(t={})),function(n){n.NoChannelFound=\"NoChannelFound\",n.AccessDenied=\"AccessDenied\",n.CreationFailed=\"CreationFailed\"}(i||(i={})),e=function(n){var t=function(n){var t,i=Object.prototype,e=i.hasOwnProperty,o=\"function\"==typeof Symbol?Symbol:{},r=o.iterator||\"@@iterator\",s=o.asyncIterator||\"@@asyncIterator\",a=o.toStringTag||\"@@toStringTag\";function c(n,t,i){return Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{c({},\"\")}catch(n){c=function(n,t,i){return n[t]=i}}function l(n,t,i,e){var o=t&&t.prototype instanceof f?t:f,r=Object.create(o.prototype),s=new N(e||[]);return r._invoke=function(n,t,i){var e=d;return function(o,r){if(e===v)throw new Error(\"Generator is already running\");if(e===m){if(\"throw\"===o)throw r;return T()}for(i.method=o,i.arg=r;;){var s=i.delegate;if(s){var a=I(s,i);if(a){if(a===p)continue;return a}}if(\"next\"===i.method)i.sent=i._sent=i.arg;else if(\"throw\"===i.method){if(e===d)throw e=m,i.arg;i.dispatchException(i.arg)}else\"return\"===i.method&&i.abrupt(\"return\",i.arg);e=v;var c=h(n,t,i);if(\"normal\"===c.type){if(e=i.done?m:u,c.arg===p)continue;return{value:c.arg,done:i.done}}\"throw\"===c.type&&(e=m,i.method=\"throw\",i.arg=c.arg)}}}(n,i,s),r}function h(n,t,i){try{return{type:\"normal\",arg:n.call(t,i)}}catch(n){return{type:\"throw\",arg:n}}}n.wrap=l;var d=\"suspendedStart\",u=\"suspendedYield\",v=\"executing\",m=\"completed\",p={};function f(){}function g(){}function w(){}var b={};b[r]=function(){return this};var y=Object.getPrototypeOf,k=y&&y(y(M([])));k&&k!==i&&e.call(k,r)&&(b=k);var x=w.prototype=f.prototype=Object.create(b);function $(n){[\"next\",\"throw\",\"return\"].forEach((function(t){c(n,t,(function(n){return this._invoke(t,n)}))}))}function L(n,t){function i(o,r,s,a){var c=h(n[o],n,r);if(\"throw\"!==c.type){var l=c.arg,d=l.value;return d&&\"object\"==typeof d&&e.call(d,\"__await\")?t.resolve(d.t).then((function(n){i(\"next\",n,s,a)}),(function(n){i(\"throw\",n,s,a)})):t.resolve(d).then((function(n){l.value=n,s(l)}),(function(n){return i(\"throw\",n,s,a)}))}a(c.arg)}var o;this._invoke=function(n,e){function r(){return new t((function(t,o){i(n,e,t,o)}))}return o=o?o.then(r,r):r()}}function I(n,i){var e=n.iterator[i.method];if(e===t){if(i.delegate=null,\"throw\"===i.method){if(n.iterator.return&&(i.method=\"return\",i.arg=t,I(n,i),\"throw\"===i.method))return p;i.method=\"throw\",i.arg=new TypeError(\"The iterator does not provide a 'throw' method\")}return p}var o=h(e,n.iterator,i.arg);if(\"throw\"===o.type)return i.method=\"throw\",i.arg=o.arg,i.delegate=null,p;var r=o.arg;return r?r.done?(i[n.resultName]=r.value,i.next=n.nextLoc,\"return\"!==i.method&&(i.method=\"next\",i.arg=t),i.delegate=null,p):r:(i.method=\"throw\",i.arg=new TypeError(\"iterator result is not an object\"),i.delegate=null,p)}function C(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function j(n){var t=n.completion||{};t.type=\"normal\",delete t.arg,n.completion=t}function N(n){this.tryEntries=[{tryLoc:\"root\"}],n.forEach(C,this),this.reset(!0)}function M(n){if(n){var i=n[r];if(i)return i.call(n);if(\"function\"==typeof n.next)return n;if(!isNaN(n.length)){var o=-1,s=function i(){for(;++o<n.length;)if(e.call(n,o))return i.value=n[o],i.done=!1,i;return i.value=t,i.done=!0,i};return s.next=s}}return{next:T}}function T(){return{value:t,done:!0}}return g.prototype=x.constructor=w,w.constructor=g,g.displayName=c(w,a,\"GeneratorFunction\"),n.isGeneratorFunction=function(n){var t=\"function\"==typeof n&&n.constructor;return!!t&&(t===g||\"GeneratorFunction\"===(t.displayName||t.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,w):(n.__proto__=w,c(n,a,\"GeneratorFunction\")),n.prototype=Object.create(x),n},n.awrap=function(n){return{t:n}},$(L.prototype),L.prototype[s]=function(){return this},n.AsyncIterator=L,n.async=function(t,i,e,o,r){void 0===r&&(r=Promise);var s=new L(l(t,i,e,o),r);return n.isGeneratorFunction(i)?s:s.next().then((function(n){return n.done?n.value:s.next()}))},$(x),c(x,a,\"Generator\"),x[r]=function(){return this},x.toString=function(){return\"[object Generator]\"},n.keys=function(n){var t=[];for(var i in n)t.push(i);return t.reverse(),function i(){for(;t.length;){var e=t.pop();if(e in n)return i.value=e,i.done=!1,i}return i.done=!0,i}},n.values=M,N.prototype={constructor:N,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method=\"next\",this.arg=t,this.tryEntries.forEach(j),!n)for(var i in this)\"t\"===i.charAt(0)&&e.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if(\"throw\"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var i=this;function o(e,o){return a.type=\"throw\",a.arg=n,i.next=e,o&&(i.method=\"next\",i.arg=t),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],a=s.completion;if(\"root\"===s.tryLoc)return o(\"end\");if(s.tryLoc<=this.prev){var c=e.call(s,\"catchLoc\"),l=e.call(s,\"finallyLoc\");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw new Error(\"try statement without catch or finally\");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(n,t){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&e.call(o,\"finallyLoc\")&&this.prev<o.finallyLoc){var r=o;break}}r&&(\"break\"===n||\"continue\"===n)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=n,s.arg=t,r?(this.method=\"next\",this.next=r.finallyLoc,p):this.complete(s)},complete:function(n,t){if(\"throw\"===n.type)throw n.arg;return\"break\"===n.type||\"continue\"===n.type?this.next=n.arg:\"return\"===n.type?(this.rval=this.arg=n.arg,this.method=\"return\",this.next=\"end\"):\"normal\"===n.type&&t&&(this.next=t),p},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===n)return this.complete(i.completion,i.afterLoc),j(i),p}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===n){var e=i.completion;if(\"throw\"===e.type){var o=e.arg;j(i)}return o}}throw new Error(\"illegal catch attempt\")},delegateYield:function(n,i,e){return this.delegate={iterator:M(n),resultName:i,nextLoc:e},\"next\"===this.method&&(this.arg=t),p}},n}(n.exports);try{regeneratorRuntime=t}catch(n){Function(\"r\",\"regeneratorRuntime = r\")(t)}},e(o={exports:{}},o.exports),function(n){n.Contact=\"fdc3.contact\",n.ContactList=\"fdc3.contactList\",n.Country=\"fdc3.country\",n.Instrument=\"fdc3.instrument\",n.Organization=\"fdc3.organization\",n.Portfolio=\"fdc3.portfolio\",n.Position=\"fdc3.position\"}(r||(r={})),function(n){n.StartCall=\"StartCall\",n.StartChat=\"StartChat\",n.ViewChart=\"ViewChart\",n.ViewContact=\"ViewContact\",n.ViewQuote=\"ViewQuote\",n.ViewNews=\"ViewNews\",n.ViewInstrument=\"ViewInstrument\",n.ViewAnalysis=\"ViewAnalysis\"}(s||(s={}));const a=()=>{const n=n=>{let t=\"\",i=0;for(n=n||1;i<n;)t+=Math.floor(65536*(1+Math.random())).toString(16).substring(1),i++;return t};return`${n(2)}-${n()}-${n()}-${n()}-${n(3)}`};var c,l,h;!function(n){n.CONNECT=\"connect\"}(c||(c={})),function(n){n.Window=\"window\",n.Directory=\"directory\"}(l||(l={})),function(n){n.Intent=\"intent-resolver\",n.Context=\"context-resolver\"}(h||(h={}));class d{constructor(n,t){this.id=n,this.handler=t}}const u=new Map,v=new Map,m=async n=>{var t;const i=await(null===(t=window.fdc3)||void 0===t?void 0:t.getSystemChannels());return!(!i||!i.find((t=>t.id===n)))},p=(n,e,o,r)=>{class s{constructor(n,t){this.id=t,this.type=n}unsubscribe(){const t=u.get(this.type);if(t){for(let n=0;n<t.length;n++)t[n].id===this.id&&t.splice(n,1);if(0===t.length){const t=\"dropContextListener\",i=p(t);n({topic:t,eventId:i,data:{type:this.type}})}}}}class l{constructor(n,t){this.id=n,this.intent=t}unsubscribe(){const t=v.get(this.intent);if(t){for(let n=0;n<t.length;n++)t[n].id===this.id&&t.splice(n,1);if(0===t.length){const t=\"dropIntentListener\",i=p(t);n({topic:t,eventId:i,data:{id:this.id,intent:this.intent}})}}}}class h{constructor(n,t,i){this.id=n,this.type=t,this.displayMetadata=i}broadcast(t){const i=\"broadcast\",e=p(i);n({topic:i,eventId:e,data:{context:t,channel:this.id}})}getCurrentContext(t){return new Promise(((o,r)=>{const s=\"getCurrentContext\",a=p(s);e.set(a,{ts:Date.now(),listener:function(n){e.delete(a),o(n)}});try{n({topic:s,eventId:a,data:{channel:this.id,contextType:t}})}catch(n){console.error(`${s} error`,n),r(i.AccessDenied)}}))}addContextListener(t,i){const e=t&&i||null===t?arguments[1]:arguments[0],o=t&&i||null!==t?arguments[0]:\"*\",r=a(),c=new d(r,e),l=`${o}|${this.id}`;if(u.has(l)){const n=u.get(l);null==n||n.push(c)}else u.set(l,[c]);const h=\"addContextListener\";return n({topic:h,eventId:p(h),data:{id:r,channel:this.id,contextType:o}}),new s(l,r)}}const p=n=>`${n}_${a()}`,f=o||!1;return new class{constructor(){}open(t,i){return new Promise(((o,r)=>{const s=\"open\",a=p(s);e.set(a,{ts:Date.now(),listener:function(n){e.delete(a);const t=null==n?void 0:n.error;t?r(new Error(t)):o()}}),n({topic:s,eventId:a,data:{target:t,context:i}})}))}broadcast(t){var i;const e=\"broadcast\",o=p(e);n({topic:e,eventId:o,data:{context:t}}),f&&(null===(i=window.fdc3)||void 0===i||i.broadcast(t))}raiseIntent(i,o,r){return new Promise(((s,a)=>{const c=\"raiseIntent\",l=p(c);e.set(l,{ts:Date.now(),listener:function(n){e.delete(l);const t=n.error;t?a(new Error(t)):s(n)}});try{n({topic:c,eventId:l,data:{intent:i,target:r,context:o}},!0)}catch(n){console.error(`${c} error`,n),a(t.ResolverUnavailable)}}))}raiseIntentForContext(i,o){return new Promise(((r,s)=>{const a=\"raiseIntentForContext\",c=p(a);e.set(c,{ts:Date.now(),listener:function(n){e.delete(c);const t=n?n.error:null;t?s(new Error(t)):r(n)}});try{n({topic:a,eventId:c,data:{target:o,context:i}},!0)}catch(n){console.error(`${a} error`,n),s(t.ResolverUnavailable)}}))}addContextListener(t,i){const e=t&&i||null===t?arguments[1]:arguments[0],o=t&&i||null!==t?arguments[0]:\"*\",r=a(),c=new d(r,e);if(u.has(o)){const n=u.get(o);null==n||n.push(c)}else u.set(o,[c]);const l=\"addContextListener\";return n({topic:l,eventId:p(l),data:{id:r,contextType:o}}),new s(o,r)}addIntentListener(t,i){const e=a(),o=new d(e,i);if(v.has(t)){const n=v.get(t);null==n||n.push(o)}else v.set(t,[o]);const r=\"addIntentListener\";return n({topic:r,eventId:p(r),data:{id:e,intent:t}}),new l(e,t)}findIntent(i,o){return new Promise(((r,s)=>{const a=\"findIntent\",c=p(a);e.set(c,{ts:Date.now(),listener:function(n){e.delete(c);const t=n.error;t?s(new Error(t)):r(n)}});try{n({topic:a,eventId:c,data:{intent:i,context:o}})}catch(n){console.error(`${a} error`,n),s(t.NoAppsFound)}}))}findIntentsByContext(i){return new Promise(((o,r)=>{const s=\"findIntentsByContext\",a=p(s);e.set(a,{ts:Date.now(),listener:function(n){e.delete(a);const t=n.error;t?r(new Error(t)):o(n)}});try{n({topic:s,eventId:a,data:{context:i}})}catch(n){console.error(`${s} error`,n),r(t.NoAppsFound)}}))}getSystemChannels(){return new Promise(((t,o)=>{const r=\"getSystemChannels\",s=p(r);e.set(s,{ts:Date.now(),listener:function(n){e.delete(s);const i=n.map((n=>new h(n.id,\"system\",n.displayMetadata)));t(i)}});try{n({topic:r,eventId:s,data:{}})}catch(n){console.error(`${r} error`,n),o(i.AccessDenied)}}))}getOrCreateChannel(t){return new Promise(((o,r)=>{const s=\"getOrCreateChannel\",a=p(s);e.set(a,{ts:Date.now(),listener:function(n){e.delete(a),o(new h(n.id,n.type,n.displayMetadata))}});try{n({topic:s,eventId:a,data:{channelId:t}})}catch(n){console.error(`${s} error`,n),r(i.AccessDenied)}}))}joinChannel(t){return new Promise((async(o,r)=>{const s=\"joinChannel\",a=p(s);e.set(a,{ts:Date.now(),listener:function(){e.delete(a),o()}});try{if(n({topic:s,eventId:a,data:{channel:t}},!0),f){await m(t)&&window.fdc3.joinChannel(t)}}catch(n){console.error(`${s} error`,n),r(i.AccessDenied)}}))}leaveCurrentChannel(){return new Promise((async(t,o)=>{const r=\"leaveCurrentChannel\",s=p(r);e.set(s,{ts:Date.now(),listener:function(){e.delete(s),t()}});try{if(n({topic:r,eventId:s,data:{}}),f){const n=await this.getCurrentChannel();if(n){await m(n.id)&&window.fdc3.leaveCurrentChannel()}}}catch(n){console.error(`${r} error`,n),o(i.AccessDenied)}}))}getCurrentChannel(){return new Promise(((t,i)=>{const o=\"getCurrentChannel\",r=p(o);e.set(r,{ts:Date.now(),listener:function(n){e.delete(r);const o=n;if(null==o?void 0:o.error)i(new Error(o.error));else{const i=n;i&&i.id?t(new h(i.id,i.type,i.displayMetadata)):t(null)}}}),n({topic:o,eventId:r,data:{}})}))}getInfo(){return{fdc3Version:\"1.2\",provider:\"Connectifi\"}}addEventListener(n,t){n===c.CONNECT&&r&&r(t)}}};class f{constructor(n,t,i,e){if(this.autoReconnect=!0,this.bridgeGlobal=!1,this.connectAttempts=1,this.headless=!1,this.instanceId=null,this.loginWindow=null,this.maxReconnectAttempts=15,this.maxReconnectInterval=6e4,this.port=8888,this.reconnectTimer=0,this.connectHandlers=[],this.returnListeners=new Map,this.sessionId=null,this.tunnelPort=8081,this.ws=null,this.currentChannel=\"global\",this.instanceTitle=\"\",null===n||0===n.length)throw\"invalid interop host\";if(null===t||0===t.length||t.indexOf(\"@\")<1)throw\"invalid appId\";this.appId=t,this.directory=t.substring(t.indexOf(\"@\")+1),this.interopHost=n,this.tunnelId=`connectifiTunnel_${this.interopHost}_${this.appId}`,this.fabProps=null==e?void 0:e.props,this.headless=!0===(null==e?void 0:e.headless)||!1,this.guiConstructor=i,this.resolverHandler=null==e?void 0:e.resolverHandler,this.joinChannelHandler=null==e?void 0:e.joinChannelHandler,this.openHandler=null==e?void 0:e.openHandler,this.onSignin=null==e?void 0:e.onSignin,this.onSignout=null==e?void 0:e.onSignout,this.onLoading=null==e?void 0:e.onLoading,this.onLoadingStopped=null==e?void 0:e.onLoadingStopped,this.externalLogger=null==e?void 0:e.logger,e&&e.onConnect&&this.addConnectHandler(e.onConnect),this.disconnectCallback=null==e?void 0:e.onDisconnect,this.authFailCallback=null==e?void 0:e.onAuthFail,this.logger=g((null==e?void 0:e.logLevel)||\"info\",null==e?void 0:e.logger),this.bridgeGlobal=(null==e?void 0:e.bridgeGlobal)||!1}onDisconnect(n){var t;null===(t=this.gui)||void 0===t||t.onDisconnect(n),this.disconnectCallback&&this.disconnectCallback.call(this,n)}onAuthFail(n){var t;null===(t=this.gui)||void 0===t||t.onAuthFail(n),this.authFailCallback&&this.authFailCallback.call(this,n)}onConnectFail(n){var t;null===(t=this.gui)||void 0===t||t.onConnectFail(n),this.connectFailCallback&&this.connectFailCallback.call(this,n)}onConnect(){var n;null===(n=this.gui)||void 0===n||n.onConnect(),this.connectHandlers.length>0&&this.connectHandlers.forEach((n=>n.call(this)))}addConnectHandler(n){this.connectHandlers.push(n)}async start(){return new Promise(((n,t)=>{const i=setTimeout((()=>{this.logger.info(\"timeout establishing connectifi session\"),t(\"timeout establishing connectifi session\")}),15e3);window.addEventListener(\"online\",(async()=>{window.clearTimeout(this.reconnectTimer),await this.connect()})),window.addEventListener(\"offline\",(()=>{this.ws&&this.ws.close(),this.handleReconnect()})),window.addEventListener(\"message\",(async t=>{var e,o,r,s;if(this.interopHost&&t.origin===this.interopHost){const a=JSON.parse(t.data||{});if(this.instanceId=a.instanceId,\"oauthComplete\"!==a.topic&&\"logoutComplete\"!==a.topic&&\"identity-error\"!==a.topic&&a.directory!==this.directory)return void this.logger.debug(\"directory mismatch on message \",this.directory,a);let c;if(a.icon&&a.icon.length>0&&(c=`${this.interopHost}/${a.icon}`),\"start-session\"===a.topic){if(await this.connect(),clearTimeout(i),this.fdc3=p(this.sendToSocket.bind(this),this.returnListeners,this.bridgeGlobal,this.addConnectHandler.bind(this)),this.gui){const n=await this.fdc3.getSystemChannels();this.gui.setState({owner:a.owner,directory:{name:a.directory,interopStrategy:a.interopStrategy,icon:c},systemChannels:n}),this.gui.showToast(`Connected to directory '${a.directory}'`,\"success\"),this.gui.stopLoading()}null===(e=this.onLoadingStopped)||void 0===e||e.call(this),this.checkInstanceTitle(),n(this.fdc3)}else\"oauthComplete\"===a.topic?(null===(o=this.gui)||void 0===o||o.startLoading(),null===(r=this.onLoading)||void 0===r||r.call(this),this.onSignin&&this.onSignin(a.owner),this.loginWindow&&this.loginWindow.close(),this.createTunnel()):\"logoutComplete\"===a.topic?(this.gui&&(this.gui.stopLoading(),this.gui.setState({owner:\"NO OWNER\"})),this.onSignout&&this.onSignout(),null===(s=this.onLoadingStopped)||void 0===s||s.call(this),this.loginWindow&&this.loginWindow.close(),this.createTunnel()):\"identity-error\"===a.topic?(clearTimeout(i),this.logger.error(\"connectifi identity error\",a),this.onConnectFail(this.directory)):\"session-error\"===a.topic&&(clearTimeout(i),this.logger.error(\"connectifi session error\",a),this.gui&&this.gui.setState({directory:{name:a.directory,interopStrategy:a.interopStrategy,icon:c}}),this.onAuthFail(a.directory))}})),document.body?(this.createTunnel(),this.createGUI()):document.addEventListener(\"DOMContentLoaded\",(()=>{this.createTunnel(),this.createGUI()}))}))}async connect(){return new Promise((n=>{const t=new URL(this.interopHost),i=`${\"https:\"===t.protocol?\"wss\":\"ws\"}://${t.host}/interop/?instanceId=${this.instanceId}&directory=${this.directory}`;this.ws=new WebSocket(i),this.instanceId?(this.logger.debug(`connecting to service, directory: ${this.directory}, instance: ${this.instanceId}`),this.ws.onopen=()=>{this.logger.debug(\"connected to connectifi service\"),this.onConnect(),this.connectAttempts=1,window.clearTimeout(this.reconnectTimer),n()},this.ws.onmessage=n=>{const t=JSON.parse(n.data);this.logger.debug(\"message received from connectifi service\",t),this.handleSocketMessage(t)},this.ws.onerror=n=>{this.logger.error(\"connectifi service error\",n)},this.ws.onclose=n=>{this.logger.info(\"connectifi service disconnected, status: \"+n.code+\", auto-reconnect? \"+this.autoReconnect+\", number of attempts: \"+this.connectAttempts+\", time \"+Date.now()),this.handleReconnect()},window.addEventListener(\"beforeUnload\",(()=>{this.ws&&this.ws.close()}))):this.logger.error(\"connectifi app instance id missing\")}))}handleReconnect(){if(this.autoReconnect){const n=this.scheduleReconnect();this.onDisconnect(n)}else this.onDisconnect()}scheduleReconnect(){const n=this.calcReconnectInterval();return this.logger.debug(`reconnecting to connectifi service in ${Math.floor(n/1e3)}s`),this.reconnectTimer=window.setTimeout((async()=>{if(this.connectAttempts++,this.connectAttempts>this.maxReconnectAttempts)return this.connectAttempts=1,window.clearTimeout(this.reconnectTimer),this.logger.error(\"connection permanent failure, manual reconnection required\"),void this.onDisconnect();await this.connect()}),n),n}createTunnel(){let n=document.getElementById(this.tunnelId);null===n&&(n=document.createElement(\"iframe\"),window.name&&(n.name=window.name),n.id=this.tunnelId,n.style.display=\"none\",document.body.appendChild(n)),this.instanceTitle=document.title;const t=`${this.interopHost}/api/tunnel/${this.appId}?title=${encodeURIComponent(this.instanceTitle)}&src=${encodeURIComponent(document.location.href)}&stateId=${encodeURIComponent(window.name)}`;n.src=t}createGUI(){!this.gui&&this.guiConstructor&&(this.gui=this.guiConstructor(this,document.body,this.fabProps))}createMessage(n){let t;t=\"string\"==typeof n?{appId:this.appId,topic:n}:{...n,appId:this.appId};const i=JSON.stringify(t);return JSON.stringify({action:\"send\",message:i})}async handleSocketMessage(n){var t,i,e,o;switch(n.topic){case\"context\":this.logger.debug(\"context received\",n.data),this.gui&&this.gui.showLoadingMessage(\"Loading New Context!\"),((n,t,i)=>{let e=[];if(n===i||void 0===i){const n=u.get(\"*\");n&&(e=e.concat(...n));const i=u.get(t.type);i&&(e=e.concat(...i))}const o=u.get(`*|${i}`);o&&(e=e.concat(...o));const r=u.get(`${t.type}|${i}`);r&&(e=e.concat(...r)),e&&e.length>0&&e.forEach((n=>n.handler.call(window,t)))})(this.currentChannel,n.data.context,n.data.channel),this.bridgeGlobal&&window.fdc3&&window.fdc3.broadcast(n.data.context),this.checkInstanceTitle();break;case\"intent\":this.logger.debug(\"intent received\",n.data),this.gui&&this.gui.showLoadingMessage(\"Loading New Intent!\"),((n,t)=>{const i=v.get(n);i&&i.forEach((n=>{n.handler.call(window,t)}))})(n.data.intent,n.data.context),this.checkInstanceTitle();break;case\"open\":this.logger.debug(\"open received\",n),null===(t=this.gui)||void 0===t||t.stopLoading(),null===(i=this.onLoadingStopped)||void 0===i||i.call(this),this.openHandler?this.openHandler.call(this,n):window.open(n.data.url,n.data.pendingId);break;case\"joinChannel\":this.currentChannel=n.data.channel,this.gui&&(this.gui.stopLoading(),this.gui.setState({channel:n.data.channel})),this.joinChannelHandler&&this.joinChannelHandler.call(this,n),null===(e=this.onLoadingStopped)||void 0===e||e.call(this);break;case h.Intent:case h.Context:const r=n.topic===h.Intent?\"raiseIntent\":\"raiseIntentForContext\",s={resolutionType:n.topic,context:n.context,data:n.data};if(this.bridgeGlobal&&window.fdc3)if(\"raiseIntent\"===r){const n=s.data.intent,t=await window.fdc3.findIntent(n.name,s.context);s.bridgeData={intent:n,apps:t.apps}}else if(\"raiseIntentForContext\"===r){const n=await window.fdc3.findIntentsByContext(s.context);s.bridgeData=n}this.logger.debug(`${r} results`,s),this.gui?(this.gui.stopLoading(),this.gui.showResolver(s)):this.resolverHandler?this.resolverHandler.call(this,s,this.resolveResolver.bind(this)):this.logger.error(\"no resolver handler configured\"),null===(o=this.onLoadingStopped)||void 0===o||o.call(this);break;default:if(this.returnListeners.has(n.topic)){this.logger.debug(`invoking listener for topic ${n.topic}`);this.returnListeners.get(n.topic).listener.call(this,n.data,this.ws),this.returnListeners.delete(n.name)}}}sendToSocket(n,t){var i,e;const o=this.createMessage(n);this.logger.debug(\"sending message to connectifi service\",o),this.ws&&this.ws.readyState===this.ws.OPEN&&(t&&(null===(i=this.gui)||void 0===i||i.startLoading(),null===(e=this.onLoading)||void 0===e||e.call(this)),this.ws.send(o))}disconnect(){this.ws&&(this.autoReconnect=!1,this.ws.close(),this.ws=null)}calcReconnectInterval(){let n=1e3*(Math.pow(2,this.connectAttempts)-1);return n>this.maxReconnectInterval&&(n=this.maxReconnectInterval),n+Math.random()*n*.1*(Math.random()>=.5?1:-1)}closeResolver(){null!==this.ws&&this.ws.send(this.createMessage(\"resolver-close\")),this.gui&&this.gui.hideResolver()}checkInstanceTitle(){setTimeout((()=>{document.title!==this.instanceTitle&&(this.instanceTitle=document.title,this.logger.info(`updating instance title to: ${this.instanceTitle}`),this.sendToSocket({topic:\"updateInstance\",eventId:\"updateAppInstance\",data:{title:this.instanceTitle,url:document.location.href}}))}),3e3)}resolveResolver(n,t,i,e){if(e&&window.fdc3)this.logger.debug(\"opening with fdc3 global bridge\",n),window.fdc3.raiseIntent(t,i,n.name);else if(this.ws&&this.ws.readyState===this.ws.OPEN){const e={topic:\"resolveIntent\",data:{selected:n,intent:t,context:i}},o=this.createMessage(e);this.logger.debug(\"sending message to connectifi service\",o),this.ws.send(o)}}}const g=(n,t)=>{const i=(...n)=>{console.log(...n),t&&t(...n)};return{info(...t){\"silent\"!==n&&i(...t)},debug(...t){\"debug\"===n&&i(...t)},error(...n){i(...n)}}};const w=\"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgNjUuNTUgNjUuNDQiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDojZmZmO2ZpbGwtcnVsZTpldmVub2RkO308L3N0eWxlPjwvZGVmcz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik04Ljk3LDU1LjNDMy40MSw0OS40MiwwLDQxLjUsMCwzMi43OCwwLDE0LjY5LDE0LjY5LDAsMzIuNzgsMHMzMi43OCwxNC42OSwzMi43OCwzMi43OGMwLDguNzMtMy40MiwxNi42Ni04Ljk5LDIyLjU0bC0xMi4yNC0xNy4wNWMuNzktMS42NiwxLjI0LTMuNTIsMS4yNC01LjQ5LDAtNy4wNi01LjczLTEyLjc4LTEyLjc4LTEyLjc4cy0xMi43OCw1LjczLTEyLjc4LDEyLjc4YzAsMS45NSwuNDQsMy44MSwxLjIyLDUuNDZsLTEyLjI1LDE3LjA2aDBaIi8+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDQuNTcsNTMuNjRjMCw2LjUxLTUuMjksMTEuOC0xMS44LDExLjhzLTExLjc5LTUuMjktMTEuNzktMTEuOCw1LjI4LTExLjc5LDExLjc5LTExLjc5LDExLjgsNS4yOCwxMS44LDExLjc5aDBaIi8+PC9zdmc+\",b=(n,t)=>n.type==t.type?n.type===l.Window?n.proximity===t.proximity?t.lastUpdate-n.lastUpdate:n.proximity-t.proximity:0:n.type===l.Directory?1:-1;class y{constructor(n,t,i){if(this.connected=!1,this.channel=\"global\",this.directory=null,this.owner=\"\",this.pickerOpen=!1,this.resolverOpen=!1,this.validPositions=[\"tl\",\"ml\",\"bl\",\"tr\",\"mr\",\"br\"],!t)throw\"you must supply a valid target element\";this.agent=n,this.target=t,this.props=i||{},this.logoSrc=this.props.logoSrc||w,this.position=\"br\",this.validPositions.indexOf(this.props.position||\"\")>=0&&(this.position=this.props.position),this.rootId=`fabRoot_${this.agent.interopHost}_${this.agent.appId}`;let e,o=document.getElementById(this.rootId);if(o)e=o.shadowRoot;else{o=document.createElement(\"div\"),o.id=this.rootId,this.target.appendChild(o),e=o.attachShadow({mode:\"open\"});const n=document.createElement(\"style\");n.innerHTML='@keyframes throbber {\\n    0%   { opacity:  0; }\\n    50%  { opacity: .5; }\\n    100% { opacity:  0; }\\n}\\n\\n@keyframes fadeIn {\\n    0% {opacity: 0;}\\n    100% {opacity: 1;}\\n}\\n\\n@keyframes fadeOut {\\n    0% {opacity: 1;}\\n    100% {opacity: 0;}\\n}\\n\\n#connectifiFabContainer {\\n    --primary-red:#da2d2d;\\n    --secondary-red: #9d0b0b;\\n    --primary-orange: #eb8242;\\n    --secondary-orange:#e25822;\\n    --primary-yellow:#f6da63;\\n    --secondary-yellow:#e3c878;\\n    --primary-green:#42b883;\\n    --secondary-green:#347474;\\n    --primary-blue:#1089ff;\\n    --secondary-blue:#505BDA;\\n    --primary-purple:#C355F5;\\n    --secondary-purple:#AA26DA;\\n    --bg-success: var(--primary-green);\\n    --bg-warning: var(--primary-red);\\n    --text-color: rgb(17, 17, 17);\\n    --drop-shadow: drop-shadow(#000 2px 2px 2px);\\n}\\n\\n.fadeIn {\\n    -webkit-animation-name: fadeIn;\\n    animation-name: fadeIn;\\n}\\n\\n.fab {\\n    background: transparent;\\n    width: 3.6rem;\\n    height: 3.6rem;\\n    position: fixed;\\n    filter: var(--drop-shadow);\\n}\\n\\n.fab.tl {\\n    top: 2rem;\\n    left: 1rem;\\n}\\n.fab.ml {\\n    top: calc(50vh - 1.8rem);\\n    left: 1rem;\\n}\\n.fab.bl {\\n    bottom: 2rem;\\n    left: 1rem;\\n}\\n.fab.tr {\\n    top: 2rem;\\n    right: 1rem;\\n}\\n.fab.mr {\\n    top: calc(50vh - 1.8rem);\\n    right: 1rem;\\n}\\n.fab.br {\\n    bottom: 2rem;\\n    right: 1rem;\\n}\\n\\n.fab .bg {\\n    border-radius: 50%;\\n    background-color: #aaa;\\n    padding: 0px;\\n    margin: 0px;\\n    height: 100%;\\n    width: 100%;\\n}\\n.fab .bg img {\\n    width: 3rem; \\n    height: 3rem;\\n    margin: 0.3rem;\\n}\\n.fab .bg .mask {\\n    background-color: white;\\n    opacity: 0;\\n    position: absolute;\\n    height: 100%;\\n    width: 100%;\\n    border-radius: 50%;\\n    transition: transform 2s ease-in-out;\\n}\\n.fab .bg .indicator {\\n    background-color: gray;\\n    position: absolute;\\n    height: 14px;\\n    width: 14px;\\n    bottom: 0;\\n    right: 0;\\n    border-radius: 50%;\\n    border: 1px solid white;\\n}\\n.fab.connected .bg .indicator {\\n    background-color: lightgreen;\\n}\\n.fab.busy .bg .mask {\\n    animation: throbber 2s infinite;\\n}\\n.fab.connected .bg {\\n    background-color: #000;\\n}\\n.fab.connected.red .bg {\\n    background-color: var(--primary-red);\\n}\\n.fab.connected.orange .bg {\\n    background-color: var(--primary-orange);\\n}\\n.fab.connected.yellow .bg {\\n    background-color: var(--primary-yellow);\\n}\\n.fab.connected.green .bg {\\n    background-color: var(--primary-green);\\n}\\n.fab.connected.blue .bg {\\n    background-color: var(--primary-blue);\\n}\\n.fab.connected.purple .bg {\\n    background-color: var(--primary-purple);\\n}\\n\\n\\n#toast {\\n    position:fixed;\\n    width:23rem;\\n    max-width:calc(100vvw - 20rem);\\n    padding-top:.6rem;\\n    padding-bottom:.6rem;\\n    color:#111;\\n    background-color: #eee;\\n    border-radius:.3rem;\\n    filter: drop-shadow(#000 2px 2px 2px);\\n    justify-content: left;\\n    z-index:99999;\\n    opacity:.9;\\n    display:none;\\n}\\n\\n.toast .icon {\\n    width:1.2rem;\\n    height:1.2rem;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n}\\n\\n.toast #iconElement {\\n    width:1.3rem;\\n    height:1.3rem;\\n    margin-left: .6rem;\\n}\\n\\n.toast.success {\\n    color: #42b883;\\n}\\n\\n.toast.warning {\\n    color: #da2d2d;\\n}\\n\\n.toast.warning .icon {\\n    background-image:url(\\'data:image/svg+xml;utf8,<svg width=\"512pt\" height=\"512pt\" version=\"1.1\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"  fill=\"%23d92d2d\"><path d=\"m506.94 443.07-208.34-416.71c-5.2969-10.602-14.359-18.848-25.414-23.121-11.051-4.2773-23.305-4.2773-34.355 0-11.055 4.2734-20.117 12.52-25.414 23.121l-208.34 416.71c-7.375 14.762-6.5859 32.289 2.0898 46.328 8.6758 14.039 24 22.586 40.5 22.59h416.68c16.496-0.015625 31.812-8.5664 40.484-22.602 8.6719-14.031 9.4688-31.555 2.1055-46.316zm-250.95-29.539c-5.2188 0-10.23-2.0742-13.922-5.7656-3.6914-3.6953-5.7695-8.7031-5.7695-13.926s2.0781-10.23 5.7695-13.922c3.6914-3.6953 8.7031-5.7695 13.922-5.7695 5.2227 0 10.234 2.0742 13.926 5.7695 3.6914 3.6914 5.7695 8.6992 5.7695 13.922s-2.0781 10.23-5.7695 13.926c-3.6914 3.6914-8.7031 5.7656-13.926 5.7656zm19.691-78.766h0.003906c0 7.0352-3.7539 13.535-9.8477 17.055-6.0938 3.5156-13.598 3.5156-19.691 0-6.0938-3.5195-9.8477-10.02-9.8477-17.055v-137.84c0-7.0352 3.7539-13.535 9.8477-17.055 6.0938-3.5156 13.598-3.5156 19.691 0 6.0938 3.5195 9.8477 10.02 9.8477 17.055z\"/></svg>\\');\\n}\\n\\n#toast.hide {\\n    opacity:0;\\n    transition: all 1s ease-out;\\n}\\n\\n#toast.show {\\n    display:flex;\\n    flex-flow: row;\\n    flex-wrap:nowrap;\\n    opacity:.9;\\n    transition: all .5s ease-in;\\n}\\n\\n.toast .message {\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    margin-top: .1rem;\\n    margin-left:1rem;\\n    margin-right:.6rem;\\n    font-family: Arial, Helvetica, sans-serif;\\n}\\n\\n.toast .action  {\\n    right: 0.3rem;\\n    position: fixed;\\n    top: 0.5rem;\\n}\\n\\n\\n.toolbar .action  {\\n    margin:.2rem;\\n}\\n.button .avatar {\\n    margin:.3rem;\\n    height: 1.1rem;\\n    width: 1.1rem;\\n    background-size: contain;\\n}\\n\\n.toolbar .button .avatar {\\n    margin-top: .15rem;\\n    margin-left: .25rem;\\n}\\n\\n.toolbar .button.signIn .avatar {\\n    margin-left: .15rem;\\n}\\n\\n.toast .button .avatar {\\n    height:1.4rem;\\n    width:1.4rem; \\n    margin-left:.25rem;\\n    margin-right:.4rem;\\n}\\n\\n#signInOut .icon {\\n    width:1rem;\\n    height:1rem;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n}\\n\\n\\n\\n.toast.tl {\\n    top:2.3rem;\\n    left: 5.3rem;\\n}\\n.toast.ml {\\n    top: calc(50vh - 1.5rem);\\n    left :5.3rem;\\n}\\n.toast.bl {\\n    bottom:2.3rem;\\n    left :5.3rem;\\n}\\n.toast.tr {\\n    top:2.3rem;\\n    right: 5.3rem;\\n}\\n.toast.mr {\\n    top: calc(50vh - 1.5rem);\\n    right: 5.3rem;\\n}\\n.toast.br {\\n    bottom:2.3rem;\\n    right :5.3rem;\\n}\\n\\n.toast.success {\\n    color: #eee;\\n    background-color: var(--bg-success);\\n}\\n\\n.toast.warning {\\n    color: #eee;\\n    background-color: var(--bg-warning);\\n}\\n\\n\\n.picker {\\n    position: fixed;\\n    height: 7.6rem;\\n    width: 9rem;\\n    flex-flow: row;\\n    flex-wrap: wrap;\\n    padding: .3rem 0;\\n    background: #eee;\\n    justify-content: center;\\n    border-radius: .3rem;\\n    filter: var(--drop-shadow);\\n    z-index: 9999;\\n    -webkit-animation-duration: .5s;\\n    animation-duration: .5s;\\n    -webkit-animation-fill-mode: both;\\n    animation-fill-mode: both;\\n    display: none;\\n    color: var(--text-color);\\n}\\n\\n.picker.tl {\\n    left: 5.3rem;\\n    top: 2rem;\\n}\\n.picker.ml {\\n    left: 5.3rem;\\n    top: calc(50vh - 3.6rem);\\n}\\n.picker.bl {\\n    left: 5.3rem;\\n    bottom: 2rem;\\n}\\n.picker.tr {\\n    right: 5.3rem;\\n    top: 2rem;\\n}\\n.picker.mr {\\n    right: 5.3rem;\\n    top: calc(50vh - 3.6rem);\\n}\\n.picker.br {\\n    right: 5.3rem;\\n    bottom: 2rem;\\n}\\n\\n.picker.show {\\n    display:flex;\\n}\\n\\n.picker .toolbar {\\n    height:1.6rem;\\n    width:100%;\\n    border-bottom:solid 1px #ccc;\\n    display:flex;\\n    flex-flow:row;\\n    align-items: center;\\n    padding-bottom: .2rem;\\n    margin-bottom: .2rem;\\n}\\n\\n.picker .toolbar .title {\\n    width: calc(100vw - 3rem);\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    margin-left: 0.5rem;\\n    font-size: 0.8rem;\\n    white-space: nowrap;\\n    \\n}\\n\\n.picker .toolbar .action {\\n    display: none;\\n    margin-left: auto;\\n    margin-right: 0.5rem;\\n}\\n\\n.picker.strict .toolbar .action {\\n    display: block;\\n}\\n\\n\\n\\n.picker .toolbar .action button {\\n    white-space: nowrap;\\n    border: 1px solid #222;\\n    border-radius: .2rem;\\n    padding: 0.1rem 0.4rem;\\n    font-size: .8rem;\\n}\\n\\n.picker .toolbar .action button:hover {\\n    color: #666;\\n    background-color: #dde;\\n}\\n\\n.picker #channelsContainer {\\n    display: flex;\\n    flex-flow: row;\\n    flex-wrap: wrap;\\n    justify-content: center;\\n}\\n\\n.picker .channel {\\n    width:2.3rem;\\n    height:2.3rem;\\n    margin:.2rem;\\n    border: 0.1px solid #aaa;\\n    border-radius: .2rem;\\n}\\n\\n.picker .channel.red {\\n    background: var(--primary-red);\\n}\\n.picker .channel.red:hover {\\n    background: var(--secondary-red);\\n}\\n\\n.picker .channel.orange {\\n    background: var(--primary-orange);\\n}\\n.picker .channel.orange:hover {\\n    background: var(--secondary-orange);\\n}\\n\\n.picker .channel.yellow {\\n    background: var(--primary-yellow);\\n}\\n.picker .channel.yellow:hover {\\n    background: var(--secondary-yellow);\\n}\\n\\n.picker .channel.green {\\n    background: var(--primary-green);\\n}\\n.picker .channel.green:hover {\\n    background: var(--secondary-green);\\n}\\n\\n.picker .channel.blue {\\n    background: var(--primary-blue);\\n}\\n.picker .channel.blue:hover {\\n    background:var(--secondary-blue);\\n}\\n\\n.picker .channel.purple {\\n    background:var(--primary-purple);\\n}\\n.picker .channel.purple:hover {\\n    background: var(--secondary-purple);\\n}\\n\\n.resolver {\\n    width: 30rem;\\n    height: 24rem;\\n    margin-left: -15rem;\\n    margin-top: -12rem;\\n    left: 50%;\\n    top: 50%;\\n    background-color: #eee;\\n    position: fixed;\\n    z-index: 9999;\\n    font-family: sans-serif;\\n    filter: var(--drop-shadow);\\n    border-radius: .6rem;\\n    display: none;\\n    opacity: 0;\\n    transition-property: opacity;\\n    transition-duration: .3s;\\n    transition-property: display;\\n    transition-duration: .5s;\\n    color: var(--text-color);\\n}\\n\\n.resolver.open {\\n    display:block;\\n    opacity:1;\\n    transition-property: opacity;\\n    transition-duration: .3s;\\n}\\n\\n.resolver .header {\\n    font-size: 1.3rem;\\n    width: 100%;\\n    padding: 0.6rem 0 0.3rem 0;\\n    background-color: #333;\\n    color: #eee;\\n    display: flex;\\n    flex-direction: row;\\n    border-top-right-radius: .6rem;\\n    border-top-left-radius: .6rem;\\n}\\n.resolver .header .logo img {\\n    height: 1.2em;\\n    width: 1.2em;\\n    margin: 2px .5em 0 .5em;\\n}\\n.resolver .header .title {\\n    flex-grow: 1;\\n    overflow: hidden;\\n    white-space: nowrap;\\n}\\n.resolver .header .title:after {\\n    content: \\'\\';\\n    display: block;\\n    position: absolute;\\n    left: 0;\\n    top: 0;\\n    width: 100%;\\n    height: 2em;\\n    pointer-events: none;\\n    background: linear-gradient(90deg, transparent, transparent 85%, #333 90%);\\n    border-top-right-radius: 0.6em;\\n}\\n\\n.resolver .header .title span {\\n    display: inline-block;\\n    margin: 2px 0 0 0;\\n}\\n.resolver .header .dismiss {\\n    margin: 0 .5em;\\n    z-index: 1;\\n}\\n.resolver .header .dismiss > div {\\n    background-color: transparent;\\n    border-radius: 50%;\\n    height: 1.2em;\\n    width: 1.2em;\\n    text-align: center;\\n    cursor: pointer;\\n}\\n.resolver .header .dismiss > div > span {\\n    position: relative;\\n    top: -1px;\\n}\\n.resolver .header .dismiss div:hover {\\n    background-color: #555;\\n}\\n\\n.resolver .list {\\n    height: 20.5rem;\\n    overflow: scroll;\\n    font-size: 1rem;\\n}\\n\\n.resolver .list .item {\\n    display: flex;\\n    flex-direction: row;\\n    flex-wrap: nowrap;\\n    height:2rem;\\n    padding:.3rem;\\n    padding-left:.6rem;\\n    overflow:hidden;\\n    align-items:center;\\n    cursor: pointer;\\n}\\n\\n.resolver .list .item:hover {\\n    background-color: #e7e7e7;\\n}\\n\\n.resolver .list .group {\\n    font-size:.9rem;\\n    padding: .25rem .75rem;\\n    border-top: .5px solid #bbb;\\n    border-bottom: .5px solid #bbb;\\n}\\n\\n.resolver .list .item .icon-container {\\n    display: flex;\\n    flex-direction: row;\\n    flex-wrap: nowrap;\\n}\\n\\n.resolver .list .item .icon {\\n    margin-right: .4rem;\\n    width:1.2rem;\\n    height:1.2rem;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n}\\n\\n.resolver .list .item .title {\\n    flex-grow: 1;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n}\\n\\n.resolver .list .item .info {\\n    display: flex;\\n    flex-direction: row;\\n    flex-wrap: nowrap;\\n    padding-right: .4rem;\\n}\\n\\n.resolver .list .item .info > div {\\n    margin-left: .4rem;\\n    width:1.2rem;\\n    height:1.2rem;\\n    background-size: contain;\\n    background-repeat: no-repeat;\\n    text-align: center;\\n    font-size: .9em;\\n    padding: 0.3em;\\n}\\n\\n.resolver .list .item .info .agent > div {\\n    margin-top: .1em;\\n}\\n\\n.resolver .list .item .info .more {\\n    padding-top: .5em;\\n    width:1.2rem;\\n    height:1.2rem;\\n    background-color: lightgray;\\n}\\n\\n.resolver .list .item .info .more > span {\\n    border-color: #aaa;\\n    border-style: dashed;\\n    border-width: 0 2px;\\n}\\n\\n.resolver .list .intentRow {\\n    padding-top:.6rem;\\n    padding-bottom:.6rem;\\n    background-color: #ddd; \\n    border-top: 1px solid #bbb;\\n}\\n\\n.resolver .list .intentTitle {\\n    font-size: 1.25rem;\\n    padding: 0 .5em;\\n}\\n\\n.resolverBackground {\\n    background-color:#111;\\n    opacity:.2;\\n    z-index:999;\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    display: none;\\n}\\n\\n.resolverBackground.open {\\n    display: block;\\n}',e.appendChild(n);const t=document.createElement(\"div\");t.id=\"connectifiFabContainer\",t.innerHTML=this.createFabHTML(),e.appendChild(t)}e&&(this.fabElem=e.getElementById(\"fab\"),this.toastElem=e.getElementById(\"toast\"),this.logoElem=e.getElementById(\"logo\"),this.pickerElem=e.getElementById(\"picker\"),this.authBtnElem=this.pickerElem.querySelector(\".toolbar #signInOut\"),this.resolverElem=e.getElementById(\"resolver\"),this.resolverBGElem=e.getElementById(\"resolverBG\"),this.resolverLogoElem=this.resolverElem.querySelector(\".header .logo img\"),this.fabElem.addEventListener(\"click\",(n=>this.togglePicker(n))),this.resolverElem.addEventListener(\"click\",(n=>{n.cancelBubble=!0,n.stopPropagation()})),this.pickerElem.addEventListener(\"click\",(n=>{n.cancelBubble=!0,n.stopPropagation()})),this.authBtnElem.addEventListener(\"click\",(n=>{this.hasOwner()?this.openLogout(n):this.openLogin(n),this.pickerOpen&&this.togglePicker(n)})),document.addEventListener(\"click\",(async n=>{this.pickerOpen&&this.togglePicker(n),this.resolverOpen&&this.agent.closeResolver()})),document.addEventListener(\"keydown\",(async n=>{this.resolverOpen&&\"Escape\"===n.code&&this.agent.closeResolver()}))),this.startLoading()}async setChannels(n){var t;const i=null===(t=this.pickerElem)||void 0===t?void 0:t.querySelector(\"#channelsContainer\");i&&(null==n||n.forEach((n=>{var t;const e=`channel-item-${n.id}`;if(!i.querySelector(`#${e}`)&&\"global\"!==n.id){const o=document.createElement(\"div\"),r=(null===(t=n.displayMetadata)||void 0===t?void 0:t.name)||n.id;o.id=e,o.classList.add(\"channel\"),o.classList.add(n.id),o.title=r,o.addEventListener(\"click\",(n=>{this.pickChannel(n,o.getAttribute(\"title\").toLowerCase())})),i.appendChild(o)}})))}showLoadingMessage(){const n=this.logoSrc||w,t=document.querySelector(\"link[rel='icon']\");if(t){const i=t.getAttribute(\"href\");if(i){const e=setInterval((()=>{t.getAttribute(\"href\")===n?t.setAttribute(\"href\",i):t.setAttribute(\"href\",n)}),500);setTimeout((()=>{clearInterval(e),t.setAttribute(\"href\",i)}),7e3)}}}setState(n){n.channel&&(this.channel=n.channel,this.updateChannelColor()),n.owner&&(this.owner=n.owner,this.updateOwner(),this.updateDirectory()),n.directory&&(this.directory=n.directory,this.updateDirectory(),n.directory.icon&&(this.logoSrc=n.directory.icon,this.updateLogo(n.directory.icon)),\"strict\"===n.directory.interopStrategy&&this.updateOwner()),n.systemChannels&&this.setChannels(n.systemChannels)}togglePicker(n){this.pickerOpen?this.hidePicker():this.showPicker(),this.pickerOpen=!this.pickerOpen,n&&n.stopPropagation()}hidePicker(){var n;null===(n=this.pickerElem)||void 0===n||n.classList.remove(\"show\")}showPicker(){var n,t,i;null===(n=this.toastElem)||void 0===n||n.classList.remove(\"show\"),null===(t=this.toastElem)||void 0===t||t.classList.add(\"hide\"),null===(i=this.pickerElem)||void 0===i||i.classList.add(\"show\")}cleanToast(){var n,t,i,e,o,r;const s=null===(n=this.toastElem)||void 0===n?void 0:n.querySelector(\"#messageElement\"),a=null===(t=this.toastElem)||void 0===t?void 0:t.querySelector(\"#actionElement\"),c=null===(i=this.toastElem)||void 0===i?void 0:i.querySelector(\"#iconElement\");null===(e=this.toastElem)||void 0===e||e.classList.remove(\"warning\"),null===(o=this.toastElem)||void 0===o||o.classList.remove(\"error\"),null===(r=this.toastElem)||void 0===r||r.classList.remove(\"success\"),null==c||c.setAttribute(\"style\",\"\"),s&&(s.textContent=\"\"),a&&(a.innerHTML=\"\")}authToast(n){var t,i,e,o,r;this.cleanToast();const s=null===(t=this.toastElem)||void 0===t?void 0:t.querySelector(\"#messageElement\"),a=null===(i=this.toastElem)||void 0===i?void 0:i.querySelector(\"#actionElement\");if(s&&(s.textContent=n),a){a.classList.add(\"active\");const n=document.createElement(\"button\"),t=document.createElement(\"div\");t.classList.add(\"icon\"),t.setAttribute(\"style\",`background-image: url('${null===(e=this.agent)||void 0===e?void 0:e.interopHost}/signin.svg')`),n.appendChild(t),n.title=\"sign in\",n.classList.add(\"signIn\"),n.addEventListener(\"click\",(n=>{this.openLogin(n)})),a.appendChild(n)}null===(o=this.toastElem)||void 0===o||o.classList.add(\"show\"),null===(r=this.toastElem)||void 0===r||r.classList.add(\"warning\")}showToast(n,t){var i,e,o,r,s;this.cleanToast();const a=null===(i=this.toastElem)||void 0===i?void 0:i.querySelector(\"#messageElement\"),c=null===(e=this.toastElem)||void 0===e?void 0:e.querySelector(\"#iconElement\");c&&\"warning\"!==t&&c.setAttribute(\"style\",`background-image: url('${null===(o=this.agent)||void 0===o?void 0:o.interopHost}/check.svg')`),a&&(a.textContent=n),null===(r=this.toastElem)||void 0===r||r.classList.add(\"show\"),t&&(null===(s=this.toastElem)||void 0===s||s.classList.add(t)),setTimeout((()=>{var n;null===(n=this.toastElem)||void 0===n||n.classList.add(\"hide\"),setTimeout((()=>{var n,i,e;null===(n=this.toastElem)||void 0===n||n.classList.remove(\"hide\"),null===(i=this.toastElem)||void 0===i||i.classList.remove(\"show\"),t&&(null===(e=this.toastElem)||void 0===e||e.classList.remove(t))}),2e3)}),3e3)}connect(){this.startLoading(),this.agent.connect()}disconnect(){this.agent.disconnect()}onConnect(){var n;this.stopLoading(),null===(n=this.fabElem)||void 0===n||n.classList.add(\"connected\"),this.showToast(\"connected to interop\",\"success\")}onDisconnect(n){var t;null===(t=this.fabElem)||void 0===t||t.classList.remove(\"connected\");const i=n?`Disconnected from interop.  Retrying in ${Math.floor(n/1e3)}s`:\"Disconnected from interop.\";this.showToast(i,\"warning\"),void 0===n&&this.stopLoading()}onAuthFail(n){this.authToast(`Please sign in to ${n}`)}onConnectFail(n){this.showToast(`Failed to connect to ${n}`,\"warning\")}startLoading(){var n;null===(n=this.fabElem)||void 0===n||n.classList.add(\"busy\")}stopLoading(){var n;null===(n=this.fabElem)||void 0===n||n.classList.remove(\"busy\")}updateChannelColor(){var n;[\"red\",\"orange\",\"yellow\",\"green\",\"blue\",\"purple\"].forEach((n=>{var t;null===(t=this.fabElem)||void 0===t||t.classList.remove(n)})),null===(n=this.fabElem)||void 0===n||n.classList.add(this.channel)}updateLogo(n){this.logoElem&&this.resolverLogoElem&&(this.logoElem.src=n,this.resolverLogoElem.src=n)}updateDirectory(){var n,t,i,e;const o=(null===(n=this.directory)||void 0===n?void 0:n.name)||\"\",r=null===(t=this.pickerElem)||void 0===t?void 0:t.querySelector(\".toolbar .title\");this.pickerElem&&(null===(i=this.directory)||void 0===i?void 0:i.interopStrategy)&&this.pickerElem.classList.add(null===(e=this.directory)||void 0===e?void 0:e.interopStrategy),r.textContent=o,r.title=`Connected to directory: '${o}'`}hasOwner(){return!(!this.owner||\"NO OWNER\"===this.owner)}updateOwner(){var n,t,i;if(\"strict\"===(null===(n=this.directory)||void 0===n?void 0:n.interopStrategy)&&this.authBtnElem){const n=this.authBtnElem.querySelector(\".icon\");this.hasOwner()?(this.authBtnElem.setAttribute(\"title\",`signed in as ${this.owner}`),null==n||n.setAttribute(\"style\",`background-image: url('${null===(i=this.agent)||void 0===i?void 0:i.interopHost}/signout.svg')`)):(this.authBtnElem.setAttribute(\"title\",\"please sign in\"),null==n||n.setAttribute(\"style\",`background-image: url('${null===(t=this.agent)||void 0===t?void 0:t.interopHost}/signin.svg')`))}}pickChannel(n,t){var i,e;this.channel===t?null===(i=this.agent.fdc3)||void 0===i||i.leaveCurrentChannel():null===(e=this.agent.fdc3)||void 0===e||e.joinChannel(t),this.pickerOpen&&this.togglePicker(n)}openLogin(n){var t,i;if(\"sameWindow\"!==this.props.loginStyle)this.agent.loginWindow=window.open(`${null===(t=this.agent)||void 0===t?void 0:t.interopHost}/api/oauth?target=interop`,\"_blank\");else{const n=window.location.href;window.location.href=`${null===(i=this.agent)||void 0===i?void 0:i.interopHost}/api/oauth?target=interop&interopUrl=${encodeURIComponent(n)}`}n.stopPropagation()}openLogout(n){var t,i;if(\"sameWindow\"!==this.props.loginStyle)this.agent.loginWindow=window.open(`${null===(t=this.agent)||void 0===t?void 0:t.interopHost}/api/logout?target=interop`,\"_blank\");else{const n=window.location.href;window.location.href=`${null===(i=this.agent)||void 0===i?void 0:i.interopHost}/api/logout?target=interop&interopUrl=${encodeURIComponent(n)}`}n.stopPropagation()}showResolver(n){var t,i,e,o,r,s;this.resolverOpen=!0,this.resolverElem&&(null===(t=this.resolverElem)||void 0===t||t.classList.add(\"open\"),null===(i=this.resolverBGElem)||void 0===i||i.classList.add(\"open\"),this.resolverBGElem&&(this.resolverBGElem.style.width=`${document.body.clientWidth}px`,this.resolverBGElem.style.height=`${document.body.clientHeight}px`)),null===(o=null===(e=this.resolverElem)||void 0===e?void 0:e.querySelector(\".header .dismiss > div\"))||void 0===o||o.addEventListener(\"click\",(()=>{this.hideResolver()}));const a=null===(r=this.resolverElem)||void 0===r?void 0:r.querySelector(\".header .title span\"),c=this.getContextDisplayName(n.context);if(n.resolutionType===h.Intent){const t=`${n.data.intent.displayName} for ${c}`;a.innerHTML=t,a.setAttribute(\"title\",t)}else n.resolutionType===h.Context&&(a.innerHTML=c);const l=null===(s=this.resolverElem)||void 0===s?void 0:s.querySelector(\".list\");if(l.innerHTML=\"\",n.resolutionType===h.Intent){const t=n.data;if(this.createAppRows(l,t,n.context),n.bridgeData){const t=n.bridgeData;this.createAppRows(l,t,n.context,!0)}}else if(n.resolutionType===h.Context){if(n.data.forEach((t=>{const i=this.createIntentRow(t);l.appendChild(i),this.createAppRows(l,t,n.context)})),n.bridgeData){n.bridgeData.forEach((t=>{const i=this.createIntentRow(t);l.appendChild(i),this.createAppRows(l,t,n.context,!0)}))}}}hideResolver(){var n,t;this.resolverOpen=!1,null===(n=this.resolverElem)||void 0===n||n.classList.remove(\"open\"),null===(t=this.resolverBGElem)||void 0===t||t.classList.remove(\"open\")}getContextDisplayName(n){var t;let i=n.name||n.type||\"\";return\"fdc3.instrument\"===n.type&&(i=`${null===(t=n.id)||void 0===t?void 0:t.ticker} - ${n.name}`),i}getAppTypeDisplayName(n){return n===l.Directory?\"Open New\":\"Send To\"}createAppRows(n,t,i,e){t.apps.sort(b);let o=\"\";t.apps.forEach((r=>{if(r.type!==o){const t=document.createElement(\"div\");t.className=\"group\",t.textContent=e?\"Local Container\":this.getAppTypeDisplayName(r.type),n.appendChild(t),o=r.type}const s=this.createAppRow(r,t.intent.name,i,e);n.appendChild(s)}))}createAppRow(n,t,i,e){var o,r,s;const a=n=>{var t;return\"string\"==typeof n?n.startsWith(\"http\")?n:`${null===(t=this.agent)||void 0===t?void 0:t.interopHost}/${n}`:n&&n.src?n.src:\"\"},c=document.createElement(\"div\");c.className=\"item\";const h=document.createElement(\"div\");if(h.className=\"icon-container\",!0!==e){const t=document.createElement(\"div\");t.setAttribute(\"style\",`\\n      background-image: url('${null===(o=this.agent)||void 0===o?void 0:o.interopHost}/${(n=>n.url&&n.url.startsWith(\"https\"))(n)?\"lock\":\"warning\"}.svg');\\n      `),t.classList.add(\"icon\"),t.classList.add(\"mask\"),h.appendChild(t)}let d;if(n.icons&&n.icons.length>0){d=document.createElement(\"img\"),d.className=\"icon\";const t=n.icons[0],i=t&&a(t);d.setAttribute(\"src\",i)}else d=document.createElement(\"div\"),d.className=\"icon\";h.appendChild(d),c.appendChild(h);const u=(n=>{const t=n.title||n.name,i=n.instanceTitle;return i?t&&!i.startsWith(t)?`${t} - ${n.instanceTitle}`:i?n.instanceTitle:\"unknown\":t||\"unknown\"})(n),v=document.createElement(\"div\");v.className=\"title\",v.textContent=u,v.setAttribute(\"title\",`${u}\\n${n.url}`),c.appendChild(v);const m=document.createElement(\"div\");if(m.className=\"info\",m.setAttribute(\"title\",`proximity: ${n.proximity}`),n.type!==l.Directory){if(n.proximity>1){const t=n.os&&n.os.toLocaleLowerCase(),i=document.createElement(\"div\");i.className=`os ${t}`,i.setAttribute(\"title\",`${n.os} (${n.device})`),i.setAttribute(\"style\",`background-image: url('${null===(r=this.agent)||void 0===r?void 0:r.interopHost}/${t}.svg')`);const e=document.createElement(\"div\");i.appendChild(e),m.appendChild(i)}if(n.proximity>0){const t=n.browser&&n.browser.toLocaleLowerCase(),i=document.createElement(\"div\");i.className=`agent ${t}`,i.setAttribute(\"title\",`${n.browser}`),i.setAttribute(\"style\",`background-image: url('${null===(s=this.agent)||void 0===s?void 0:s.interopHost}/${t}.svg')`);const e=document.createElement(\"div\");i.appendChild(e),m.appendChild(i)}}return c.appendChild(m),c.addEventListener(\"click\",(o=>{this.agent&&(this.agent.resolveResolver(n,t,i,e||!1),this.agent.closeResolver(),o.stopPropagation())})),c}createIntentRow(n){const t=document.createElement(\"div\");t.className=\"intentRow\";const i=document.createElement(\"div\");return i.className=\"intentTitle\",i.textContent=n.intent.displayName,t.appendChild(i),t}createFabHTML(){return`\\n    <div id=\"connectifiFabContainer\">\\n    <div id=\"fab\" class=\"fab ${this.position}\">\\n      <div class=\"bg\">\\n        <div class=\"mask\"></div>\\n        <div class=\"indicator\"></div>\\n        <img\\n          id=\"logo\"\\n          alt=\"connectifi\"\\n          class=\"logo loaded connected\"\\n          src=\"${this.logoSrc}\"\\n        />\\n      </div>\\n    </div>\\n    <div id=\"picker\" class=\"picker fadeIn ${this.position}\">\\n      <div class=\"toolbar\">\\n        <div class=\"title\"></div>\\n        <div class=\"action\">\\n          <button id=\"signInOut\" title=\"sign in\">\\n            <div class=\"icon\">\\n            </div>\\n          </button>\\n        </div>\\n      </div>\\n      <div id=\"channelsContainer\">\\n      </div>\\n    </div>\\n    <div id=\"resolver\" class=\"resolver\">\\n      <div class=\"header\">\\n        <div class=\"logo\">\\n          <img src=\"${this.logoSrc}\" />\\n        </div>\\n        <div class=\"title\">\\n          <span></span>\\n        </div>\\n        <div class=\"dismiss\">\\n          <div><span>&#215;</span></div>\\n        </div>\\n      </div>\\n      <div class=\"list\"></div>\\n    </div>\\n    <div id=\"resolverBG\" class=\"resolverBackground\"></div>\\n    <div id=\"toast\" class=\"toast ${this.position}\">\\n      <div id=\"iconElement\" class=\"icon\"></div>\\n      <div id=\"messageElement\" class=\"message\"></div>\\n      <div id=\"actionElement\" class=\"action\"></div>\\n    </div>\\n  </div>\\n  `}}const k=async(n,t,i)=>{let e;if(i&&!0===i.headless)e=new f(n,t,void 0,i);else{const o=(n,t,i)=>new y(n,t,i);e=new f(n,t,o,i)}return e.start()};export{l as AppInstanceType,c as ConnectifiEventTypes,h as ResolutionType,k as createAgent};\n"],"names":[],"sourceRoot":""}